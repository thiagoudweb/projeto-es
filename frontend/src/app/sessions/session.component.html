<div class="page-wrapper">
  <!-- Botão de voltar -->
  <button class="back-button" (click)="goBack()">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="currentColor"
    >
      <path
        d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"
      />
    </svg>
    Voltar
  </button>
    
  <div class="session-form-container">
  <div class="form-header">
    <h2 class="form-title">
      <i class="fas fa-calendar-plus"></i>
      Agendar Nova Sessão
    </h2>
    <p class="form-description">
      Preencha os dados abaixo para agendar uma sessão de mentoria
    </p>
  </div>

  <!-- Formulário -->
  <form [formGroup]="sessionForm" (ngSubmit)="onSubmit()" class="session-form" novalidate>

    <!-- Seleção de Mentor -->
    <div class="form-group" *ngIf="!isMentor()">
      <label for="mentorId" class="form-label">
        <i class="fas fa-user-tie"></i>Mentor
      </label>
      <select
        id="mentorId" formControlName="mentorId" class="form-control">
        <option value="">Selecione um mentor</option>
        <option *ngFor="let mentor of mentors" [value]="mentor.id">
            {{ mentor.fullName }} ({{ mentor.user.username }})
        </option>
      </select>
    </div>
    <div
      *ngIf="
        sessionForm.get('mentorId')?.touched
      "
      class="error"
    >
      Selecione pelo menos um mentor.
    </div>

    <!-- Seleção de Mentorado -->
    <div class="form-group" *ngIf="isMentor()">
      <label for="mentoredId" class="form-label">
        <i class="fas fa-user-tie"></i>Mentorado
      </label>
      <select
        id="mentoredId" formControlName="mentoredId" class="form-control">
        <option value="">Selecione um mentorado</option>
        <option *ngFor="let mentored of mentoreds" [value]="mentored.id">
            {{ mentored.fullName }} ({{ mentored.user.username }})
        </option>
      </select>
    </div>
    <div
      *ngIf="
        sessionForm.get('mentoredId')?.touched
      "
      class="error"
    >
      Selecione pelo menos um mentorado.
    </div>

    
      <!-- Data -->
      <div class="form-group col-md-6">
        <label for="date" class="form-label">
          <i class="fas fa-calendar-alt"></i>
          Data
        </label>
        <input
          type="date"
          id="date"
          formControlName="date"
          class="form-control"
        >
      </div>
      <div
      *ngIf="
        sessionForm.get('date')?.invalid &&
        sessionForm.get('date')?.touched
      "
      class="error"
      >
        Escolha uma data para a reunião.
      </div>


      <!-- Horário -->
      <div class="form-group col-md-6">
        <label for="time" class="form-label">
          <i class="fas fa-clock"></i>
          Horário
        </label>
        <select
          id="time"
          formControlName="time"
          class="form-control"
        >
          <option value="">Selecione o horário</option>
          <option *ngFor="let timeSlot of timeSlots" [value]="timeSlot">
            {{ timeSlot }}
          </option>
        </select>
      </div>
    <div
      *ngIf="
        sessionForm.get('time')?.invalid &&
        sessionForm.get('time')?.touched
      "
      class="error"
      >
        Escolha um horário para a reunião.
    </div>

    <!-- Local -->
    <div class="form-group">
      <label for="location" class="form-label">
        <i class="fas fa-map-marker-alt"></i>
        Local
      </label>
      <input
        type="text"
        id="location"
        formControlName="location"
        class="form-control"
      >
    </div>
    <div
      *ngIf="
        sessionForm.get('location')?.invalid &&
        sessionForm.get('location')?.touched
      "
      class="error"
      >
        Digite o local onde será feita a reunião.
    </div>

    <!-- Tópico -->
    <div class="form-group">
      <label for="meetingTopic" class="form-label">
        <i class="fas fa-comment-dots"></i>
        Tópico da Sessão
      </label>
      <textarea
        id="meetingTopic"
        formControlName="meetingTopic"
        rows="4"
        class="form-control textarea"
      ></textarea>   
    </div>
    <div
      *ngIf="
        sessionForm.get('meetingTopic')?.invalid &&
        sessionForm.get('meetingTopic')?.touched
      "
      class="error"
      >
        Descreva um pouco sobre o que será a reunião.
    </div>


    <!-- Botões -->
    <div class="form-actions">
      <button type="submit" class="btn btn-primary" [disabled]="loading">
        <i *ngIf="loading" class="fas fa-spinner fa-spin"></i>
        <i *ngIf="!loading" class="fas fa-paper-plane"></i>
        {{ loading ? 'Agendando...' : 'Agendar Sessão' }}
      </button>
    </div>
  </form>
</div>

